<?xml version="1.0" encoding="utf-8" ?>
<project name="pigiron-master-build" default="all" basedir=".">

    <description>
    The PigIron Project
    Open Source Client, Servlet and Web 2.0 Navigator for IBM z/VM SMAPI
    Copyright *C* 2008,2009
    Jack J. Woehr
    PO Box 51 Golden, Colorado 80402 USA
    http://pigiron.sourceforge.net
    http://www.softwoehr.com
    
    No Warranty No Guarantee Open Source.
    Please read the file license.txt.
    
    =========================
    PigIron master build file
    =========================
    
    PigIron was conceived in three parts,pigiron, piglet and pigview.
    Each has its own Ant build.xml. This is overall build.xml file
    which juggles targets from the individual projects.
    </description>

    <property location="${basedir}/../pigiron" name="pigiron.dir"></property>
    <property location="${basedir}/../piglet" name="piglet.dir"></property>
    <property location="${basedir}/../pigview" name="pigview.dir"></property>
    <property location="${basedir}/../dist" name="dist.dir"></property>
    <property location="${basedir}/../dist/doc" name="doc.dir"></property>
    <property location="${doc.dir}/javadoc" name="javadoc.dir"></property>
    <property location="${pigiron.dir}/src" name="pigiron.java.src.dir"></property>
    <property location="${piglet.dir}/src/java" name="piglet.java.src.dir"></property>
    <property location="${pigview.dir}/src" name="pigview.java.src.dir"></property>

    <target name="all" depends="build,javadocs,distrib" description="Build and package all components for deployment and distribution"/>

    <target name="build" depends="pigiron,pigview,piglet" description="Build PigIron, PigView and PigLet"/>

    <target name="pigiron" description="Build PigIron Open Source Java client for IBM z/VM SMAPI">
        <ant dir="${pigiron.dir}" inheritall="false" inheritrefs="false" target="build"/>
    </target>

    <target name="pigview" description="Build the PigView Web 2.0 Navigator and insert it in PigLet web dir hierarchy for inclusion in PigLet .war file">
        <ant dir="${pigview.dir}" inheritall="false" inheritrefs="false" target="build"/>
        <ant dir="${pigview.dir}" inheritall="false" inheritrefs="false" target="piglet"/>
    </target>

    <target name="piglet" description="Build the PigLet PigIron Servlet and its .war file">
        <ant dir="${piglet.dir}" inheritall="false" inheritrefs="false" target="build"/>
    </target>

    <target name="clean" depends="clean-distdir" description="Cleans the overall project's intermediate and output files">
        <ant dir="${pigiron.dir}" inheritall="false" inheritrefs="false" target="clean"/>
        <ant dir="${piglet.dir}" inheritall="false" inheritrefs="false" target="clean"/>
        <ant dir="${pigview.dir}" inheritall="false" inheritrefs="false" target="clean"/>
    </target>

    <target name="clean-distdir" description="Cleans the overall project's build dirs">
        <delete dir="${dist.dir}"/>
    </target>

    <target name="javadocs" description="Generate composite javadocs for all PigIron projects">
        <mkdir dir="${javadoc.dir}"/>
        <javadoc destdir="${javadoc.dir}">
            <sourcefiles>
                <fileset dir="${pigiron.java.src.dir}" defaultexcludes="yes"/>
                <fileset dir="${piglet.java.src.dir}" defaultexcludes="yes"/>
                <fileset dir="${pigview.java.src.dir}" defaultexcludes="yes"/>
            </sourcefiles>
        </javadoc>
    </target>

    <target name="distrib">
        <fail message="Not implemented yet."></fail>
    </target>

</project>
